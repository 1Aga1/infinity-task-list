{"ast":null,"code":"import _slicedToArray from\"C:/Users/Dpopo/Documents/GitHub/infinity-task-list/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import tasks from\"../../store/Tasks\";import style from'./TaskListItem.module.scss';import{Checkbox,message}from'antd';import{observer}from\"mobx-react-lite\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var TaskListItem=function TaskListItem(_ref){var task=_ref.task,childrenStyle=_ref.childrenStyle;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),childrenList=_useState2[0],setChildrenList=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),childrenOpen=_useState4[0],setChildrenOpen=_useState4[1];useEffect(function(){setChildrenList(tasks.getChildrenTaskList(task.id));},[tasks.tasks]);var onCheck=function onCheck(e){if(e.target.checked)tasks.selectTask(task.id);else tasks.deselectTask(task.id);};var taskClickHandler=function taskClickHandler(){if(!childrenOpen){try{tasks.getTask(task.id);setChildrenOpen(true);}catch(e){message.error('Ошибка загрузки задач!');}}else setChildrenOpen(false);};return/*#__PURE__*/_jsxs(\"div\",{style:childrenStyle,children:[/*#__PURE__*/_jsxs(\"div\",{className:style.task,onClick:taskClickHandler,children:[childrenList.length>0?/*#__PURE__*/_jsx(\"div\",{className:childrenOpen?style.arrow__open:style.arrow__close}):null,/*#__PURE__*/_jsx(\"p\",{className:style.task__name,children:task.name}),/*#__PURE__*/_jsx(Checkbox,{onChange:onCheck,checked:!!tasks.selectedTasks.find(function(selectedTask){return selectedTask.id===task.id;})})]}),/*#__PURE__*/_jsx(_Fragment,{children:childrenList.length>0&&childrenOpen?childrenList.map(function(childrenTask){return/*#__PURE__*/_jsx(TaskListItem,{task:childrenTask,childrenStyle:{margin:'5px 0 5px 10px'}},childrenTask.id);}):null})]});};export default observer(TaskListItem);","map":{"version":3,"names":["React","useEffect","useState","tasks","style","Checkbox","message","observer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TaskListItem","_ref","task","childrenStyle","_useState","_useState2","_slicedToArray","childrenList","setChildrenList","_useState3","_useState4","childrenOpen","setChildrenOpen","getChildrenTaskList","id","onCheck","e","target","checked","selectTask","deselectTask","taskClickHandler","getTask","error","children","className","onClick","length","arrow__open","arrow__close","task__name","name","onChange","selectedTasks","find","selectedTask","map","childrenTask","margin"],"sources":["C:/Users/Dpopo/Documents/GitHub/infinity-task-list/src/components/TaskListItem/TaskListItem.tsx"],"sourcesContent":["import React, {FC, useEffect, useState} from 'react';\r\nimport {ITaskListItemProps} from \"./ITaskListItemProps\";\r\nimport {ITask} from \"../../type/task\";\r\nimport tasks from \"../../store/Tasks\";\r\nimport style from './TaskListItem.module.scss'\r\nimport {Checkbox, message} from 'antd';\r\nimport type { CheckboxChangeEvent } from 'antd/es/checkbox';\r\nimport {observer} from \"mobx-react-lite\";\r\n\r\nconst TaskListItem: FC<ITaskListItemProps> = ({task, childrenStyle}) => {\r\n    const [childrenList, setChildrenList] = useState<ITask[]>([]);\r\n    const [childrenOpen, setChildrenOpen] = useState<boolean>(false);\r\n\r\n    useEffect(() => {\r\n        setChildrenList(tasks.getChildrenTaskList(task.id))\r\n    }, [tasks.tasks])\r\n\r\n    const onCheck = (e: CheckboxChangeEvent) => {\r\n        if (e.target.checked) tasks.selectTask(task.id)\r\n        else tasks.deselectTask(task.id);\r\n    }\r\n\r\n    const taskClickHandler = () => {\r\n        if (!childrenOpen) {\r\n            try {\r\n                tasks.getTask(task.id);\r\n                setChildrenOpen(true);\r\n            } catch (e) {\r\n                message.error('Ошибка загрузки задач!');\r\n            }\r\n        } else setChildrenOpen(false);\r\n    }\r\n\r\n    return (\r\n        <div style={childrenStyle}>\r\n            <div className={style.task} onClick={taskClickHandler}>\r\n                {\r\n                    childrenList.length > 0\r\n                        ?\r\n                        <div className={childrenOpen ? style.arrow__open : style.arrow__close}></div>\r\n                        : null\r\n                }\r\n                <p className={style.task__name}>{task.name}</p>\r\n                <Checkbox onChange={onCheck}\r\n                          checked={!!tasks.selectedTasks.find(selectedTask => selectedTask.id === task.id)}\r\n                ></Checkbox>\r\n            </div>\r\n            <>\r\n                {\r\n                    childrenList.length > 0 && childrenOpen\r\n                        ?\r\n                        childrenList.map(childrenTask =>\r\n                            <TaskListItem task={childrenTask} childrenStyle={{margin: '5px 0 5px 10px'}} key={childrenTask.id}/>\r\n                        )\r\n                        : null\r\n                }\r\n            </>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default observer(TaskListItem);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}