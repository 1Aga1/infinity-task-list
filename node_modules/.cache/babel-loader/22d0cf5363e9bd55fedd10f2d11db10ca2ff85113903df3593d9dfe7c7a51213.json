{"ast":null,"code":"import _slicedToArray from\"C:/Users/Dpopo/Documents/GitHub/infinity-task-list/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Button,Form,Input,Modal,Select}from\"antd\";import tasks from\"../../store/Tasks\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var requiredFormItem={required:true,message:''};var TextArea=Input.TextArea;var TaskModal=function TaskModal(_ref){var open=_ref.open,onCancel=_ref.onCancel,initialValues=_ref.initialValues,onFinish=_ref.onFinish,loading=_ref.loading;var _useState=useState(),_useState2=_slicedToArray(_useState,2),options=_useState2[0],setOptions=_useState2[1];useEffect(function(){setOptions(tasks.tasks.map(function(task){return{value:task.id,label:task.name};}));},[tasks.tasks]);return/*#__PURE__*/_jsx(Modal,{destroyOnClose:true,title:initialValues?initialValues.name:'Новая задача',open:open,onCancel:onCancel,footer:null,width:800,children:/*#__PURE__*/_jsxs(Form,{labelCol:{span:8},wrapperCol:{span:16},labelAlign:\"left\",onFinish:onFinish,initialValues:initialValues,children:[/*#__PURE__*/_jsx(Form.Item,{name:\"name\",label:\"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\",rules:[requiredFormItem],children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0437\\u0430\\u0434\\u0430\\u0447\\u0438\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"description\",label:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\",children:/*#__PURE__*/_jsx(TextArea,{placeholder:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u0437\\u0430\\u0434\\u0430\\u0447\\u0438\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"parentTaskId\",label:\"\\u0417\\u0430\\u0434\\u0430\\u0447\\u0430 \\u0432\\u0435\\u0440\\u0445\\u043D\\u0435\\u0433\\u043E \\u0443\\u0440\\u043E\\u0432\\u043D\\u044F\",children:/*#__PURE__*/_jsx(Select,{showSearch:true,placeholder:\"\\u0417\\u0430\\u0434\\u0430\\u0447\\u0430 \\u0432\\u0435\\u0440\\u0445\\u043D\\u0435\\u0433\\u043E \\u0443\\u0440\\u043E\\u0432\\u043D\\u044F\",filterOption:function filterOption(input,option){var _option$label;return((_option$label=option===null||option===void 0?void 0:option.label)!==null&&_option$label!==void 0?_option$label:'').toLowerCase().includes(input.toLowerCase());},options:options})}),/*#__PURE__*/_jsx(Form.Item,{style:{display:'flex',justifyContent:'right'},children:/*#__PURE__*/_jsx(Button,{htmlType:\"submit\",type:\"primary\",loading:loading,children:initialValues?'Редактировать':'Добавить'})})]})});};export default TaskModal;","map":{"version":3,"names":["React","useEffect","useState","Button","Form","Input","Modal","Select","tasks","jsx","_jsx","jsxs","_jsxs","requiredFormItem","required","message","TextArea","TaskModal","_ref","open","onCancel","initialValues","onFinish","loading","_useState","_useState2","_slicedToArray","options","setOptions","map","task","value","id","label","name","destroyOnClose","title","footer","width","children","labelCol","span","wrapperCol","labelAlign","Item","rules","placeholder","showSearch","filterOption","input","option","_option$label","toLowerCase","includes","style","display","justifyContent","htmlType","type"],"sources":["C:/Users/Dpopo/Documents/GitHub/infinity-task-list/src/components/TaskModal/TaskModal.tsx"],"sourcesContent":["import React, {FC, useEffect, useState} from 'react';\r\nimport {Button, Form, Input, Modal, Select} from \"antd\";\r\nimport {ITaskModalProps} from \"./ITaskModalProps\";\r\nimport tasks from \"../../store/Tasks\";\r\n\r\nconst requiredFormItem = {\r\n    required: true,\r\n    message: ''\r\n}\r\n\r\nconst {TextArea} = Input;\r\n\r\ninterface IOption {\r\n    value: number,\r\n    label: string\r\n}\r\n\r\nconst TaskModal: FC<ITaskModalProps> = ({open, onCancel, initialValues, onFinish, loading}) => {\r\n    const [options, setOptions] = useState<IOption[]>();\r\n\r\n    useEffect(() => {\r\n        setOptions(tasks.tasks.map(task => {\r\n            return {\r\n                value: task.id,\r\n                label: task.name\r\n            }\r\n        }))\r\n    }, [tasks.tasks])\r\n\r\n    return (\r\n        <Modal\r\n            destroyOnClose\r\n            title={initialValues ? initialValues.name : 'Новая задача'}\r\n            open={open}\r\n            onCancel={onCancel}\r\n            footer={null}\r\n            width={800}\r\n        >\r\n            <Form labelCol={{span: 8}} wrapperCol={{span: 16}} labelAlign='left' onFinish={onFinish} initialValues={initialValues}>\r\n                <Form.Item name='name' label='Наименование' rules={[requiredFormItem]}>\r\n                    <Input placeholder='Название задачи'/>\r\n                </Form.Item>\r\n                <Form.Item name='description' label='Описание'>\r\n                    <TextArea placeholder='Описание задачи'/>\r\n                </Form.Item>\r\n                <Form.Item name='parentTaskId' label='Задача верхнего уровня'>\r\n                    <Select\r\n                        showSearch\r\n                        placeholder=\"Задача верхнего уровня\"\r\n                        filterOption={(input, option) =>\r\n                            (option?.label ?? '').toLowerCase().includes(input.toLowerCase())\r\n                        }\r\n                        options={options}\r\n                    />\r\n                </Form.Item>\r\n                <Form.Item style={{display: 'flex', justifyContent: 'right'}}>\r\n                    <Button htmlType='submit' type='primary' loading={loading}>{initialValues ? 'Редактировать' : 'Добавить'}</Button>\r\n                </Form.Item>\r\n            </Form>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default TaskModal;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}